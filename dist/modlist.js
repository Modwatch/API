"use strict";var mongoose=require("mongoose"),bcrypt=require("bcrypt-nodejs"),Schema=mongoose.Schema,modlistSchema=new Schema({list:String,modlisttxt:String,skyrimini:String,skyrimprefsini:String,username:String,password:String,plugins:[],modlist:[],ini:[],prefsini:[],skse:[],enblocal:[],tag:String,enb:String,game:String,pic:String,badge:String,token:String,timestamp:Date,score:{type:Number,"default":0},votedon:[{username:String,upvoted:Boolean}]},{collection:"modlist"});modlistSchema.methods.generateHash=function(i){return bcrypt.hashSync(i,bcrypt.genSaltSync(8),null)},modlistSchema.methods.validPassword=function(i){return bcrypt.compareSync(i,this.password)},modlistSchema.methods.shrinkArrays=function(){var i=[],t=!1,e=0;if(this.plugins&&this.plugins.length>0&&"undefined"!=typeof this.plugins[0].name){for(i=[],e=0;e<this.plugins.length;e++)i.push(this.plugins[e].name);this.plugins=i,t=!0}if(this.modlist&&this.modlist.length>0&&"undefined"!=typeof this.modlist[0].name){for(i=[],e=0;e<this.modlist.length;e++)i.push(this.modlist[e].name);this.modlist=i,t=!0}if(this.ini&&this.ini.length>0&&"undefined"!=typeof this.ini[0].name){for(i=[],e=0;e<this.ini.length;e++)i.push(this.ini[e].name);this.ini=i,t=!0}if(this.prefsini&&this.prefsini.length>0&&"undefined"!=typeof this.prefsini[0].name){for(i=[],e=0;e<this.prefsini.length;e++)i.push(this.prefsini[e].name);this.prefsini=i,t=!0}if(this.skse&&this.skse.length>0&&"undefined"!=typeof this.skse[0].name){for(i=[],e=0;e<this.skse.length;e++)i.push(this.skse[e].name);this.skse=i,t=!0}if(this.enblocal&&this.enblocal.length>0&&"undefined"!=typeof this.enblocal[0].name){for(i=[],e=0;e<this.enblocal.length;e++)i.push(this.enblocal[e].name);this.enblocal=i,t=!0}t&&this.save()},modlistSchema.methods.updateFile=function(i,t){var e=[],s=[];e=i.split('","'),e[0]=e[0].substring(2),e[e.length-1]=e[e.length-1].substring(0,e[e.length-1].length-2);for(var n=0;n<e.length;n++)s[n]=e[n];return s},modlistSchema.methods.votedOnUser=function(i){for(var t={index:-1,upvoted:!1},e=0;e<this.votedon.length;e++)if(this.votedon[e].username===i){t.index=e,t.upvoted=this.votedon[e].upvoted;break}return t},module.exports=mongoose.model("Modlist",modlistSchema);
//# sourceMappingURL=modlist.js.map
